<ng-template #createad let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Add advertisement</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="createAdForm">
      <div class="mb-3 row">
        <div class="col-6">
          <label for="inputSize" class="form-label">Size</label>
          <div class="input-group">
            <input type="number" class="form-control" formControlName="inputSize" id="inputSize" placeholder="20">
            <span class="input-group-text" id="inputSizeSuffix" aria-describedby="inputSize">m&#178;</span>
          </div>
        </div>
        <div class="col-6">
          <label for="inputRoom" class="form-label">Rooms</label>
          <input type="number" class="form-control" formControlName="inputRoom" id="inputRoom" placeholder="2">
        </div>
      </div>
      <div class="mb-3">
        <label for="inputPrice" class="form-label">Price</label>
        <div class="input-group">
          <span class="input-group-text" id="inputPricePretend">$</span>
          <input type="number" class="form-control" formControlName="inputPrice" id="inputPrice" placeholder="1500" aria-describedby="inputPricePretend">  
        </div>
      </div>
      <div class="mb-3">
        <img class="mt-3 mb-3 center" *ngIf="fileChoosen" [src]="url" height="200"><br>
        <label for="formFile" class="form-label">Choose picture</label>
        <input class="form-control" type="file" id="formFile" formControlName="formFile" (change)="onSelectFile($event)">
      </div>
      <div class="mb-3">
        <label for="selectType" class="form-label">Type</label>
        <select class="form-control search-slt" id="selectType" formControlName="selectType">
          <option value="" disabled>Select Type</option>
          <option value="brick">Brick</option>
          <option value="stone">Stone</option>
          <option value="wooden">Wooden</option>
          <option value="concrete">Concrete</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="selectState" class="form-label">State</label>
        <select class="form-control search-slt" id="selectState" formControlName="selectState">
          <option value="" disabled>Select State</option>
          <option value="crumbly">Crumbly</option>
          <option value="old">Old</option>
          <option value="under_renovation">Under renovation</option>
          <option value="new">New</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="inputDetails" class="form-label">Details</label>
        <textarea class="form-control" id="inputDetails" formControlName="inputDetails" rows="3"></textarea>
      </div>
      <div class="mb-3">
        
        <label class="form-label" for="locationbutton"> Choose your location.</label>
        <button id = "locationbutton" class="btn btn-secondary btn-sm" (click)="open(chooselocation)">Choose location.</button>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-outline-primary" (click)="modal.close('add')">Add</button>
  </div>
</ng-template>

<ng-template #deletead let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Advertisement deletion</h4>
    <button type="button" class="close" aria-label="Close button" aria-describedby="modal-title" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p><strong>Are you sure you want to delete this advertisement?</strong></p>
    <p>All information associated to this advertisement will be permanently deleted.
    <span class="text-danger">This operation can not be undone.</span>
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" ngbAutofocus class="btn btn-danger" (click)="modal.close('yes')">Yes</button>
    <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel')">Cancel</button>
  </div>
</ng-template>





<ng-template #chooselocation let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Choose the location of your property!</h4>
    <button type="button" class="close" aria-label="Close button" aria-describedby="modal-title" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <agm-map (mapClick)="mapClicked($event)"
    [latitude]="lat"
    [longitude]="lng"
    [zoom]="zoom">

    </agm-map>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel')">Cancel</button>
  </div>
</ng-template>


<div class="py-5">
    <div class="row">
      <div class="col-md-9 mx-auto">
        <span class="anchor" id="formDetails"></span>
  
        <!-- form card login -->
        <div class="card rounded-0">
          <div class="card-header mb-0">
            <div class="row">
              <h4 class="mb-0 col-6">Your ads</h4>
              <div class="mb-0 col-6" style="text-align: right; vertical-align: middle; font-size: larger;">
                <button class="btn btn-secondary btn-sm" (click)="open(createad)">Add new ad</button>
              </div>
            </div>
          </div>
          <div class="card-body">
              <div class="row">
                    <form class="form-details col-12">
                        <div class="mb-3" *ngIf="ads.length != 0">

                            <div *ngFor="let ad of ads">

                                <div class="card rounded-1 w-75 mb-2">
                                    <div class="card-header mb-0">
                                        <div class="row">
                                            <h5 class="mb-0 col-6">Ad</h5>
                                            <div class="mb-0 col-6" style="text-align: right; vertical-align: middle; font-size: larger;">
                                                <button class="btn btn-danger btn-sm mr-2" disabled>Edit</button>
                                                <button class="btn btn-danger btn-sm" (click)="open(deletead, ad)">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <form class="form-ad col-12">
                                            <div class="row">
                                                <img class="col-lg-4 picture-div" src="{{ad.picture}}">
                                                <div class="mb-1 col-12 col-md-4">
                                                    <label for="adLocation" class="form-label">Location</label>
                                                    <p id="adLocation">{{ad.location}}</p>
                                                </div>
                                                <div class="mb-1 col-12 col-lg-4">
                                                    <label for="adPrice">Price</label>
                                                    <p id="adPrice">{{ad.price}}</p>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                            </div>

                        </div>
                        <h2 class="mt-4 mb-4 text-center text-muted" *ngIf="ads.length == 0">Currently you have no ads</h2>
                    </form>    
                </div>
          </div>
          <div class="card-footer text-center text-muted">
            Â© 2021
          </div>
          <!--/card-block-->
        </div>
        <!-- /form card -->
      </div>
    </div>
</div>